<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>测试更新后的错题详情页面</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .test-link {
            display: inline-block;
            background: #007AFF;
            color: white;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 6px;
            margin: 5px;
        }
        .test-link:hover {
            background: #0056CC;
        }
        .test-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        .test-btn:hover {
            background: #218838;
        }
        .highlight {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
            border-left: 4px solid #28a745;
        }
        .status-info {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 12px;
        }
        .feature-list {
            list-style-type: none;
            padding: 0;
        }
        .feature-list li {
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }
        .feature-list li:before {
            content: "✅ ";
            color: #28a745;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h2>🔧 更新后的错题详情页面测试</h2>
        
        <div class="highlight">
            <h3>📝 本次优化内容</h3>
            <ul class="feature-list">
                <li>改进了页面初始化逻辑，自动设置测试token</li>
                <li>简化了数据生成逻辑，提高可靠性</li>
                <li>增强了错误处理和调试信息</li>
                <li>优化了学科名称显示（中英文对照）</li>
                <li>改进了Toast提示系统，支持不同类型</li>
                <li>添加了全局错误捕获机制</li>
                <li>延迟加载确保页面完全准备</li>
            </ul>
        </div>
        
        <div class="test-section">
            <h3>🧪 基础功能测试</h3>
            <p>点击下面的链接测试不同ID的错题详情页面：</p>
            
            <a href="error-detail.html?id=1" class="test-link" target="_blank">错题 #1 (数学)</a>
            <a href="error-detail.html?id=2" class="test-link" target="_blank">错题 #2 (语文)</a>
            <a href="error-detail.html?id=3" class="test-link" target="_blank">错题 #3 (英语)</a>
            <a href="error-detail.html?id=4" class="test-link" target="_blank">错题 #4 (数学)</a>
            <a href="error-detail.html?id=5" class="test-link" target="_blank">错题 #5 (语文)</a>
            <a href="error-detail.html" class="test-link" target="_blank">无ID参数 (默认ID=1)</a>
            
            <div class="status-info">
                <strong>测试要点：</strong><br>
                • 页面能否正常加载（不再卡在加载状态）<br>
                • 学科显示是否正确（中文名称）<br>
                • 错题ID与内容是否对应<br>
                • 控制台是否有详细的调试信息
            </div>
        </div>
        
        <div class="test-section">
            <h3>🎯 功能完整性测试</h3>
            <p>在任一错题详情页面中测试以下功能：</p>
            
            <ol>
                <li><strong>标记已复习</strong>：点击"✅ 标记已复习"按钮</li>
                <li><strong>状态持久化</strong>：刷新页面，状态应保持</li>
                <li><strong>相似题练习</strong>：点击"📚 练习相似题"按钮</li>
                <li><strong>分享错题</strong>：点击"📤 分享错题"按钮</li>
                <li><strong>删除错题</strong>：点击"🗑️ 删除错题"按钮</li>
            </ol>
            
            <div class="status-info">
                <strong>预期结果：</strong><br>
                • 所有按钮都有响应和反馈<br>
                • Toast提示有不同颜色（成功=绿色，错误=红色）<br>
                • 操作后状态正确更新<br>
                • 相似题练习能正常跳转
            </div>
        </div>
        
        <div class="test-section">
            <h3>🛠️ 调试工具</h3>
            <button class="test-btn" onclick="openConsole()">打开浏览器控制台</button>
            <button class="test-btn" onclick="checkLocalStorage()">检查本地存储</button>
            <button class="test-btn" onclick="clearTestData()">清除测试数据</button>
            <button class="test-btn" onclick="testToast()">测试Toast提示</button>
            
            <div id="debugInfo" class="status-info" style="margin-top: 10px;">
                点击"检查本地存储"查看当前状态
            </div>
        </div>
        
        <div class="test-section">
            <h3>📊 性能和稳定性</h3>
            <p>测试页面在各种情况下的表现：</p>
            
            <ul>
                <li>快速切换不同ID的错题页面</li>
                <li>频繁刷新页面</li>
                <li>网络断开时的行为</li>
                <li>长时间停留在页面</li>
            </ul>
            
            <div class="status-info">
                <strong>观察重点：</strong><br>
                • 页面加载速度<br>
                • 内存使用情况<br>
                • 是否有JavaScript错误<br>
                • 响应式布局是否正常
            </div>
        </div>
        
        <div class="test-section">
            <h3>🔗 相关页面</h3>
            <a href="debug-error-detail.html" class="test-link">调试工具页面</a>
            <a href="simple-error-detail.html?id=1" class="test-link">简化版对比</a>
            <a href="similar-practice.html?errorId=1" class="test-link">相似题练习</a>
        </div>
    </div>

    <script>
        function openConsole() {
            alert('请按 F12 或右键选择"检查元素"打开开发者工具，然后查看 Console 标签页');
        }

        function checkLocalStorage() {
            const token = localStorage.getItem('token');
            const reviewedErrors = localStorage.getItem('reviewedErrors');
            
            const debugInfo = document.getElementById('debugInfo');
            debugInfo.innerHTML = `
                <strong>本地存储状态:</strong><br>
                Token: ${token || '未设置'}<br>
                已复习错题: ${reviewedErrors || '无'}<br>
                存储时间: ${new Date().toLocaleString()}
            `;
        }

        function clearTestData() {
            localStorage.clear();
            alert('已清除所有测试数据！');
            checkLocalStorage();
        }

        function testToast() {
            // 这里只是演示，实际Toast在错题详情页面中
            const messages = [
                { text: '成功消息测试', type: 'success' },
                { text: '错误消息测试', type: 'error' },
                { text: '信息消息测试', type: 'info' },
                { text: '警告消息测试', type: 'warning' }
            ];
            
            alert('请在错题详情页面中测试Toast功能\n\n示例操作:\n• 标记已复习 (绿色成功提示)\n• 模拟错误操作 (红色错误提示)');
        }

        // 页面加载时自动检查状态
        document.addEventListener('DOMContentLoaded', checkLocalStorage);
    </script>
</body>
</html>