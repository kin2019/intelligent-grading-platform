<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZYJCæ™ºèƒ½æ‰¹æ”¹å¹³å° - åŠŸèƒ½å®Œæ•´æ€§æµ‹è¯•</title>
    <link rel="stylesheet" href="css/common.css">
    <style>
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: var(--bg-primary);
        }
        
        .test-section {
            margin-bottom: 30px;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-large);
            padding: 20px;
        }
        
        .test-section h3 {
            margin-top: 0;
            color: var(--primary-color);
            border-bottom: 2px solid var(--border-light);
            padding-bottom: 10px;
        }
        
        .test-item {
            margin: 15px 0;
            padding: 15px;
            background: var(--bg-secondary);
            border-radius: var(--radius-medium);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .test-item .info {
            flex: 1;
        }
        
        .test-item .status {
            margin-left: 15px;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .status.pending { background: #ffeaa7; color: #2d3436; }
        .status.testing { background: #74b9ff; color: white; }
        .status.success { background: var(--success-color); color: white; }
        .status.error { background: var(--error-color); color: white; }
        
        .test-result {
            margin-top: 10px;
            padding: 10px;
            border-radius: var(--radius-small);
            background: var(--bg-tertiary);
            font-size: 12px;
            max-height: 100px;
            overflow-y: auto;
        }
        
        .overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .overview-card {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: var(--radius-large);
        }
        
        .overview-card h4 {
            margin: 0 0 10px 0;
            font-size: var(--font-lg);
        }
        
        .overview-card .number {
            font-size: var(--font-3xl);
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .control-panel {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .control-panel button {
            margin: 0 10px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 style="text-align: center; margin-bottom: 30px;">ZYJCæ™ºèƒ½æ‰¹æ”¹å¹³å° - åŠŸèƒ½å®Œæ•´æ€§æµ‹è¯•</h1>
        
        <!-- æ€»è§ˆç»Ÿè®¡ -->
        <div class="overview">
            <div class="overview-card">
                <h4>æ€»æµ‹è¯•é¡¹ç›®</h4>
                <div class="number" id="total-tests">0</div>
                <div>ä¸ªåŠŸèƒ½</div>
            </div>
            <div class="overview-card">
                <h4>é€šè¿‡æµ‹è¯•</h4>
                <div class="number" id="passed-tests">0</div>
                <div>ä¸ªåŠŸèƒ½</div>
            </div>
            <div class="overview-card">
                <h4>æµ‹è¯•é€šè¿‡ç‡</h4>
                <div class="number" id="pass-rate">0%</div>
                <div>æˆåŠŸç‡</div>
            </div>
            <div class="overview-card">
                <h4>æµ‹è¯•çŠ¶æ€</h4>
                <div class="number" id="test-status">å¾…å¼€å§‹</div>
                <div>å½“å‰çŠ¶æ€</div>
            </div>
        </div>
        
        <!-- æ§åˆ¶é¢æ¿ -->
        <div class="control-panel">
            <button class="btn btn-primary" onclick="startAllTests()">å¼€å§‹å…¨éƒ¨æµ‹è¯•</button>
            <button class="btn btn-secondary" onclick="clearResults()">æ¸…é™¤ç»“æœ</button>
            <button class="btn btn-success" onclick="exportReport()">å¯¼å‡ºæŠ¥å‘Š</button>
        </div>
        
        <!-- ç”¨æˆ·è®¤è¯æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ” ç”¨æˆ·è®¤è¯æ¨¡å—</h3>
            
            <div class="test-item" data-test="login">
                <div class="info">
                    <strong>å¾®ä¿¡ç™»å½• - å­¦ç”Ÿç«¯</strong>
                    <div>æµ‹è¯•å­¦ç”Ÿè§’è‰²ç™»å½•åŠŸèƒ½</div>
                </div>
                <button class="btn btn-sm btn-primary" onclick="testLogin('student')">æµ‹è¯•</button>
                <div class="status pending">å¾…æµ‹è¯•</div>
            </div>
            
            <div class="test-item" data-test="login-parent">
                <div class="info">
                    <strong>å¾®ä¿¡ç™»å½• - å®¶é•¿ç«¯</strong>
                    <div>æµ‹è¯•å®¶é•¿è§’è‰²ç™»å½•åŠŸèƒ½</div>
                </div>
                <button class="btn btn-sm btn-primary" onclick="testLogin('parent')">æµ‹è¯•</button>
                <div class="status pending">å¾…æµ‹è¯•</div>
            </div>
            
            <div class="test-item" data-test="user-info">
                <div class="info">
                    <strong>ç”¨æˆ·ä¿¡æ¯è·å–</strong>
                    <div>è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯</div>
                </div>
                <button class="btn btn-sm btn-primary" onclick="testUserInfo()">æµ‹è¯•</button>
                <div class="status pending">å¾…æµ‹è¯•</div>
            </div>
        </div>
        
        <!-- å­¦ç”ŸåŠŸèƒ½æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ“š å­¦ç”Ÿç«¯åŠŸèƒ½æ¨¡å—</h3>
            
            <div class="test-item" data-test="dashboard">
                <div class="info">
                    <strong>å­¦ç”Ÿä»ªè¡¨ç›˜</strong>
                    <div>è·å–å­¦ä¹ æ•°æ®ç»Ÿè®¡å’Œæœ€è¿‘ä½œä¸š</div>
                </div>
                <button class="btn btn-sm btn-primary" onclick="testDashboard()">æµ‹è¯•</button>
                <div class="status pending">å¾…æµ‹è¯•</div>
            </div>
            
            <div class="test-item" data-test="error-book">
                <div class="info">
                    <strong>é”™é¢˜æœ¬ç®¡ç†</strong>
                    <div>é”™é¢˜ç»Ÿè®¡ã€åˆ†ç±»å’Œç®¡ç†åŠŸèƒ½</div>
                </div>
                <button class="btn btn-sm btn-primary" onclick="testErrorBook()">æµ‹è¯•</button>
                <div class="status pending">å¾…æµ‹è¯•</div>
            </div>
            
            <div class="test-item" data-test="study-plan">
                <div class="info">
                    <strong>å­¦ä¹ è®¡åˆ’</strong>
                    <div>AIç”Ÿæˆçš„ä¸ªæ€§åŒ–å­¦ä¹ å»ºè®®</div>
                </div>
                <button class="btn btn-sm btn-primary" onclick="testStudyPlan()">æµ‹è¯•</button>
                <div class="status pending">å¾…æµ‹è¯•</div>
            </div>
        </div>
        
        <!-- ä½œä¸šæ‰¹æ”¹æµ‹è¯• -->
        <div class="test-section">
            <h3>âœï¸ ä½œä¸šæ‰¹æ”¹æ¨¡å—</h3>
            
            <div class="test-item" data-test="homework-list">
                <div class="info">
                    <strong>ä½œä¸šå†å²åˆ—è¡¨</strong>
                    <div>è·å–ç”¨æˆ·çš„ä½œä¸šæ‰¹æ”¹å†å²è®°å½•</div>
                </div>
                <button class="btn btn-sm btn-primary" onclick="testHomeworkList()">æµ‹è¯•</button>
                <div class="status pending">å¾…æµ‹è¯•</div>
            </div>
            
            <div class="test-item" data-test="homework-detail">
                <div class="info">
                    <strong>ä½œä¸šè¯¦æƒ…æŸ¥çœ‹</strong>
                    <div>æŸ¥çœ‹å…·ä½“ä½œä¸šçš„æ‰¹æ”¹ç»“æœ</div>
                </div>
                <button class="btn btn-sm btn-primary" onclick="testHomeworkDetail()">æµ‹è¯•</button>
                <div class="status pending">å¾…æµ‹è¯•</div>
            </div>
            
            <div class="test-item" data-test="subjects">
                <div class="info">
                    <strong>æ”¯æŒå­¦ç§‘åˆ—è¡¨</strong>
                    <div>è·å–å¹³å°æ”¯æŒçš„æ‰€æœ‰å­¦ç§‘</div>
                </div>
                <button class="btn btn-sm btn-primary" onclick="testSubjects()">æµ‹è¯•</button>
                <div class="status pending">å¾…æµ‹è¯•</div>
            </div>
        </div>
        
        <!-- å›¾åƒå¤„ç†æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ–¼ï¸ å›¾åƒå¤„ç†æ¨¡å—</h3>
            
            <div class="test-item" data-test="ocr-validation">
                <div class="info">
                    <strong>OCRæ–‡ä»¶éªŒè¯</strong>
                    <div>æµ‹è¯•OCRæ¥å£çš„æ–‡ä»¶ç±»å‹éªŒè¯</div>
                </div>
                <button class="btn btn-sm btn-primary" onclick="testOCRValidation()">æµ‹è¯•</button>
                <div class="status pending">å¾…æµ‹è¯•</div>
            </div>
            
            <div class="test-item" data-test="image-history">
                <div class="info">
                    <strong>å›¾ç‰‡å¤„ç†å†å²</strong>
                    <div>è·å–ç”¨æˆ·çš„å›¾ç‰‡å¤„ç†è®°å½•</div>
                </div>
                <button class="btn btn-sm btn-primary" onclick="testImageHistory()">æµ‹è¯•</button>
                <div class="status pending">å¾…æµ‹è¯•</div>
            </div>
        </div>
        
        <!-- VIPå’Œæ”¯ä»˜æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ’ VIPå’Œæ”¯ä»˜æ¨¡å—</h3>
            
            <div class="test-item" data-test="vip-status">
                <div class="info">
                    <strong>VIPçŠ¶æ€æŸ¥è¯¢</strong>
                    <div>è·å–ç”¨æˆ·çš„VIPçŠ¶æ€å’Œæƒç›Š</div>
                </div>
                <button class="btn btn-sm btn-primary" onclick="testVIPStatus()">æµ‹è¯•</button>
                <div class="status pending">å¾…æµ‹è¯•</div>
            </div>
            
            <div class="test-item" data-test="vip-plans">
                <div class="info">
                    <strong>VIPå¥—é¤åˆ—è¡¨</strong>
                    <div>è·å–æ‰€æœ‰å¯è´­ä¹°çš„VIPå¥—é¤</div>
                </div>
                <button class="btn btn-sm btn-primary" onclick="testVIPPlans()">æµ‹è¯•</button>
                <div class="status pending">å¾…æµ‹è¯•</div>
            </div>
            
            <div class="test-item" data-test="create-order">
                <div class="info">
                    <strong>åˆ›å»ºæ”¯ä»˜è®¢å•</strong>
                    <div>æµ‹è¯•VIPå¥—é¤è´­ä¹°æµç¨‹</div>
                </div>
                <button class="btn btn-sm btn-primary" onclick="testCreateOrder()">æµ‹è¯•</button>
                <div class="status pending">å¾…æµ‹è¯•</div>
            </div>
        </div>
        
        <!-- ç”¨æˆ·ç®¡ç†æµ‹è¯• -->
        <div class="test-section">
            <h3>ğŸ‘¤ ç”¨æˆ·ç®¡ç†æ¨¡å—</h3>
            
            <div class="test-item" data-test="user-profile">
                <div class="info">
                    <strong>ç”¨æˆ·èµ„æ–™</strong>
                    <div>è·å–ç”¨æˆ·è¯¦ç»†èµ„æ–™ä¿¡æ¯</div>
                </div>
                <button class="btn btn-sm btn-primary" onclick="testUserProfile()">æµ‹è¯•</button>
                <div class="status pending">å¾…æµ‹è¯•</div>
            </div>
            
            <div class="test-item" data-test="user-settings">
                <div class="info">
                    <strong>ç”¨æˆ·è®¾ç½®</strong>
                    <div>è·å–ç”¨æˆ·çš„ä¸ªæ€§åŒ–è®¾ç½®</div>
                </div>
                <button class="btn btn-sm btn-primary" onclick="testUserSettings()">æµ‹è¯•</button>
                <div class="status pending">å¾…æµ‹è¯•</div>
            </div>
            
            <div class="test-item" data-test="user-achievements">
                <div class="info">
                    <strong>ç”¨æˆ·æˆå°±</strong>
                    <div>è·å–ç”¨æˆ·çš„å­¦ä¹ æˆå°±å’Œå¾½ç« </div>
                </div>
                <button class="btn btn-sm btn-primary" onclick="testUserAchievements()">æµ‹è¯•</button>
                <div class="status pending">å¾…æµ‹è¯•</div>
            </div>
        </div>
    </div>

    <script src="js/common.js"></script>
    <script>
        const API_BASE = 'http://localhost:8000/api/v1';
        let authToken = '';
        let testResults = {};

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateStats();
        });

        // è·å–è®¤è¯ä»¤ç‰Œ
        async function ensureAuth() {
            if (!authToken) {
                try {
                    const response = await fetch(`${API_BASE}/auth/wechat/login`, {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({code: 'test_123', role: 'student'})
                    });
                    const data = await response.json();
                    authToken = data.access_token;
                } catch (error) {
                    console.error('è·å–è®¤è¯ä»¤ç‰Œå¤±è´¥:', error);
                    throw error;
                }
            }
            return authToken;
        }

        // æµ‹è¯•çŠ¶æ€ç®¡ç†
        function setTestStatus(testName, status, result = null) {
            testResults[testName] = {status, result, timestamp: new Date()};
            
            const testItem = document.querySelector(`[data-test="${testName}"]`);
            if (testItem) {
                const statusElement = testItem.querySelector('.status');
                statusElement.className = `status ${status}`;
                
                const statusText = {
                    pending: 'å¾…æµ‹è¯•',
                    testing: 'æµ‹è¯•ä¸­...',
                    success: 'é€šè¿‡',
                    error: 'å¤±è´¥'
                };
                statusElement.textContent = statusText[status];
                
                // æ˜¾ç¤ºæµ‹è¯•ç»“æœ
                let resultElement = testItem.querySelector('.test-result');
                if (!resultElement) {
                    resultElement = document.createElement('div');
                    resultElement.className = 'test-result';
                    testItem.appendChild(resultElement);
                }
                
                if (result) {
                    resultElement.textContent = typeof result === 'string' ? result : JSON.stringify(result, null, 2);
                    resultElement.style.display = 'block';
                } else {
                    resultElement.style.display = 'none';
                }
            }
            
            updateStats();
        }

        // æ›´æ–°ç»Ÿè®¡æ•°æ®
        function updateStats() {
            const totalTests = document.querySelectorAll('.test-item').length;
            const passedTests = Object.values(testResults).filter(r => r.status === 'success').length;
            const failedTests = Object.values(testResults).filter(r => r.status === 'error').length;
            const testingTests = Object.values(testResults).filter(r => r.status === 'testing').length;
            const passRate = totalTests > 0 ? Math.round((passedTests / totalTests) * 100) : 0;
            
            document.getElementById('total-tests').textContent = totalTests;
            document.getElementById('passed-tests').textContent = passedTests;
            document.getElementById('pass-rate').textContent = passRate + '%';
            
            let statusText = 'å¾…å¼€å§‹';
            if (testingTests > 0) statusText = 'æµ‹è¯•ä¸­';
            else if (passedTests + failedTests === totalTests) statusText = 'å·²å®Œæˆ';
            else if (passedTests + failedTests > 0) statusText = 'è¿›è¡Œä¸­';
            
            document.getElementById('test-status').textContent = statusText;
        }

        // é€šç”¨APIæµ‹è¯•å‡½æ•°
        async function testAPI(testName, url, options = {}) {
            setTestStatus(testName, 'testing');
            
            try {
                await ensureAuth();
                const response = await fetch(url, {
                    headers: {
                        'Authorization': `Bearer ${authToken}`,
                        'Content-Type': 'application/json',
                        ...options.headers
                    },
                    ...options
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    setTestStatus(testName, 'success', `çŠ¶æ€ç : ${response.status}, æ•°æ®: ${JSON.stringify(data).substring(0, 200)}...`);
                } else {
                    setTestStatus(testName, 'error', `çŠ¶æ€ç : ${response.status}, é”™è¯¯: ${data.message || data.detail || 'æœªçŸ¥é”™è¯¯'}`);
                }
            } catch (error) {
                setTestStatus(testName, 'error', `ç½‘ç»œé”™è¯¯: ${error.message}`);
            }
        }

        // å…·ä½“æµ‹è¯•å‡½æ•°
        async function testLogin(role) {
            const testName = role === 'student' ? 'login' : 'login-parent';
            setTestStatus(testName, 'testing');
            
            try {
                const response = await fetch(`${API_BASE}/auth/wechat/login`, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({code: `${role}_test_123`, role: role})
                });
                
                const data = await response.json();
                
                if (response.ok && data.access_token) {
                    authToken = data.access_token;
                    setTestStatus(testName, 'success', `ç™»å½•æˆåŠŸï¼Œè·å¾—ä»¤ç‰Œ: ${data.access_token.substring(0, 50)}...`);
                } else {
                    setTestStatus(testName, 'error', `ç™»å½•å¤±è´¥: ${data.message || data.detail || 'æœªçŸ¥é”™è¯¯'}`);
                }
            } catch (error) {
                setTestStatus(testName, 'error', `ç½‘ç»œé”™è¯¯: ${error.message}`);
            }
        }

        async function testUserInfo() {
            await testAPI('user-info', `${API_BASE}/auth/me`);
        }

        async function testDashboard() {
            await testAPI('dashboard', `${API_BASE}/student/dashboard`);
        }

        async function testErrorBook() {
            await testAPI('error-book', `${API_BASE}/student/error-book`);
        }

        async function testStudyPlan() {
            await testAPI('study-plan', `${API_BASE}/student/study-plan`);
        }

        async function testHomeworkList() {
            await testAPI('homework-list', `${API_BASE}/homework/list`);
        }

        async function testHomeworkDetail() {
            await testAPI('homework-detail', `${API_BASE}/homework/1234`);
        }

        async function testSubjects() {
            await testAPI('subjects', `${API_BASE}/homework/subjects`);
        }

        async function testOCRValidation() {
            setTestStatus('ocr-validation', 'testing');
            
            try {
                await ensureAuth();
                
                // åˆ›å»ºä¸€ä¸ªæµ‹è¯•æ–‡ä»¶
                const testFile = new File(['test content'], 'test.txt', {type: 'text/plain'});
                const formData = new FormData();
                formData.append('file', testFile);
                
                const response = await fetch(`${API_BASE}/image/ocr`, {
                    method: 'POST',
                    headers: {'Authorization': `Bearer ${authToken}`},
                    body: formData
                });
                
                const data = await response.json();
                
                // æœŸæœ›è¿”å›400é”™è¯¯ï¼Œå› ä¸ºä¸æ˜¯å›¾ç‰‡æ–‡ä»¶
                if (response.status === 400 && data.message && data.message.includes('å›¾ç‰‡')) {
                    setTestStatus('ocr-validation', 'success', 'æ–‡ä»¶ç±»å‹éªŒè¯æ­£å¸¸å·¥ä½œï¼Œæ­£ç¡®æ‹’ç»äº†éå›¾ç‰‡æ–‡ä»¶');
                } else {
                    setTestStatus('ocr-validation', 'error', `é¢„æœŸ400é”™è¯¯ï¼Œå®é™…çŠ¶æ€: ${response.status}`);
                }
            } catch (error) {
                setTestStatus('ocr-validation', 'error', `ç½‘ç»œé”™è¯¯: ${error.message}`);
            }
        }

        async function testImageHistory() {
            await testAPI('image-history', `${API_BASE}/image/history`);
        }

        async function testVIPStatus() {
            await testAPI('vip-status', `${API_BASE}/user/vip-status`);
        }

        async function testVIPPlans() {
            await testAPI('vip-plans', `${API_BASE}/payment/plans`);
        }

        async function testCreateOrder() {
            setTestStatus('create-order', 'testing');
            
            try {
                await ensureAuth();
                const formData = new FormData();
                formData.append('plan_id', 'monthly');
                formData.append('payment_method', 'wechat');
                
                const response = await fetch(`${API_BASE}/payment/create-order`, {
                    method: 'POST',
                    headers: {'Authorization': `Bearer ${authToken}`},
                    body: formData
                });
                
                const data = await response.json();
                
                if (response.ok && data.order_id) {
                    setTestStatus('create-order', 'success', `è®¢å•åˆ›å»ºæˆåŠŸ: ${data.order_id}, é‡‘é¢: ${data.amount}å…ƒ`);
                } else {
                    setTestStatus('create-order', 'error', `åˆ›å»ºè®¢å•å¤±è´¥: ${data.message || data.detail || 'æœªçŸ¥é”™è¯¯'}`);
                }
            } catch (error) {
                setTestStatus('create-order', 'error', `ç½‘ç»œé”™è¯¯: ${error.message}`);
            }
        }

        async function testUserProfile() {
            await testAPI('user-profile', `${API_BASE}/user/profile`);
        }

        async function testUserSettings() {
            await testAPI('user-settings', `${API_BASE}/user/settings`);
        }

        async function testUserAchievements() {
            await testAPI('user-achievements', `${API_BASE}/user/achievements`);
        }

        // å¼€å§‹å…¨éƒ¨æµ‹è¯•
        async function startAllTests() {
            const testFunctions = [
                () => testLogin('student'),
                () => testLogin('parent'),
                testUserInfo,
                testDashboard,
                testErrorBook,
                testStudyPlan,
                testHomeworkList,
                testHomeworkDetail,
                testSubjects,
                testOCRValidation,
                testImageHistory,
                testVIPStatus,
                testVIPPlans,
                testCreateOrder,
                testUserProfile,
                testUserSettings,
                testUserAchievements
            ];

            document.getElementById('test-status').textContent = 'æ­£åœ¨æµ‹è¯•';
            
            for (const testFunc of testFunctions) {
                await testFunc();
                await new Promise(resolve => setTimeout(resolve, 500)); // é—´éš”500ms
            }
            
            showToast('æ‰€æœ‰æµ‹è¯•å·²å®Œæˆï¼', 'success');
        }

        // æ¸…é™¤ç»“æœ
        function clearResults() {
            testResults = {};
            document.querySelectorAll('.test-item').forEach(item => {
                const statusElement = item.querySelector('.status');
                statusElement.className = 'status pending';
                statusElement.textContent = 'å¾…æµ‹è¯•';
                
                const resultElement = item.querySelector('.test-result');
                if (resultElement) {
                    resultElement.style.display = 'none';
                }
            });
            updateStats();
            showToast('æµ‹è¯•ç»“æœå·²æ¸…é™¤', 'info');
        }

        // å¯¼å‡ºæŠ¥å‘Š
        function exportReport() {
            const report = {
                timestamp: new Date().toISOString(),
                summary: {
                    total: Object.keys(testResults).length,
                    passed: Object.values(testResults).filter(r => r.status === 'success').length,
                    failed: Object.values(testResults).filter(r => r.status === 'error').length,
                    passRate: Object.keys(testResults).length > 0 ? 
                        Math.round((Object.values(testResults).filter(r => r.status === 'success').length / Object.keys(testResults).length) * 100) : 0
                },
                results: testResults
            };
            
            const blob = new Blob([JSON.stringify(report, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `zyjc-test-report-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            showToast('æµ‹è¯•æŠ¥å‘Šå·²å¯¼å‡º', 'success');
        }
    </script>
</body>
</html>