<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZYJC - 页面导航测试</title>
    <link rel="stylesheet" href="css/common.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-large);
            background: var(--bg-primary);
        }
        
        .test-section h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        
        .test-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-medium);
            background: var(--bg-secondary);
            text-decoration: none;
            color: var(--text-primary);
            transition: all var(--transition-base);
        }
        
        .test-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
            border-color: var(--primary-color);
        }
        
        .test-item-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .test-item-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .test-item-desc {
            font-size: var(--font-sm);
            color: var(--text-secondary);
            text-align: center;
        }
        
        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-left: 8px;
        }
        
        .status-working {
            background: var(--success-color);
        }
        
        .status-partial {
            background: var(--warning-color);
        }
        
        .status-dev {
            background: var(--error-color);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 style="text-align: center; margin-bottom: 30px;">ZYJC智能批改平台 - 页面功能测试</h1>
        
        <div style="text-align: center; margin-bottom: 30px;">
            <p>点击下面的卡片测试各个页面功能</p>
            <p style="font-size: var(--font-sm); color: var(--text-secondary);">
                <span class="status-indicator status-working"></span> 完全可用
                <span class="status-indicator status-partial"></span> 部分可用
                <span class="status-indicator status-dev"></span> 开发中
            </p>
        </div>

        <!-- 核心页面 -->
        <div class="test-section">
            <h3>🏠 核心页面</h3>
            <div class="test-grid">
                <a href="login.html" class="test-item">
                    <div class="test-item-icon">🔐</div>
                    <div class="test-item-title">
                        登录页面
                        <span class="status-indicator status-working"></span>
                    </div>
                    <div class="test-item-desc">用户登录，角色选择</div>
                </a>
                
                <a href="student-home.html" class="test-item">
                    <div class="test-item-icon">🎓</div>
                    <div class="test-item-title">
                        学生首页
                        <span class="status-indicator status-working"></span>
                    </div>
                    <div class="test-item-desc">学习仪表盘，数据统计</div>
                </a>
                
                <a href="parent-home.html" class="test-item">
                    <div class="test-item-icon">👨‍👩‍👧‍👦</div>
                    <div class="test-item-title">
                        家长首页
                        <span class="status-indicator status-working"></span>
                    </div>
                    <div class="test-item-desc">家庭学习管理</div>
                </a>
                
                <a href="profile.html" class="test-item">
                    <div class="test-item-icon">👤</div>
                    <div class="test-item-title">
                        个人中心
                        <span class="status-indicator status-working"></span>
                    </div>
                    <div class="test-item-desc">用户资料，设置管理</div>
                </a>
            </div>
        </div>

        <!-- 学习功能 -->
        <div class="test-section">
            <h3>📚 学习功能</h3>
            <div class="test-grid">
                <a href="homework-submit.html" class="test-item">
                    <div class="test-item-icon">📝</div>
                    <div class="test-item-title">
                        作业提交
                        <span class="status-indicator status-working"></span>
                    </div>
                    <div class="test-item-desc">拍照上传，OCR识别</div>
                </a>
                
                <a href="homework-result.html" class="test-item">
                    <div class="test-item-icon">✅</div>
                    <div class="test-item-title">
                        批改结果
                        <span class="status-indicator status-working"></span>
                    </div>
                    <div class="test-item-desc">AI批改，详细分析</div>
                </a>
                
                <a href="error-book.html" class="test-item">
                    <div class="test-item-icon">📖</div>
                    <div class="test-item-title">
                        错题本
                        <span class="status-indicator status-working"></span>
                    </div>
                    <div class="test-item-desc">错题管理，复习跟踪</div>
                </a>
                
                <a href="study-plan.html" class="test-item">
                    <div class="test-item-icon">📅</div>
                    <div class="test-item-title">
                        学习计划
                        <span class="status-indicator status-working"></span>
                    </div>
                    <div class="test-item-desc">AI推荐，任务管理</div>
                </a>
            </div>
        </div>

        <!-- VIP功能 -->
        <div class="test-section">
            <h3>💎 VIP功能</h3>
            <div class="test-grid">
                <a href="vip-center.html" class="test-item">
                    <div class="test-item-icon">👑</div>
                    <div class="test-item-title">
                        VIP中心
                        <span class="status-indicator status-working"></span>
                    </div>
                    <div class="test-item-desc">会员套餐，支付管理</div>
                </a>
            </div>
        </div>

        <!-- 测试工具 -->
        <div class="test-section">
            <h3>🔧 测试工具</h3>
            <div class="test-grid">
                <a href="test-all-features.html" class="test-item">
                    <div class="test-item-icon">🧪</div>
                    <div class="test-item-title">
                        API功能测试
                        <span class="status-indicator status-working"></span>
                    </div>
                    <div class="test-item-desc">全面的API接口测试</div>
                </a>
                
                <a href="http://localhost:8000/docs" class="test-item" target="_blank">
                    <div class="test-item-icon">📋</div>
                    <div class="test-item-title">
                        API文档
                        <span class="status-indicator status-working"></span>
                    </div>
                    <div class="test-item-desc">Swagger API文档</div>
                </a>
            </div>
        </div>

        <!-- 快速操作 -->
        <div class="test-section">
            <h3>⚡ 快速操作</h3>
            <div style="text-align: center;">
                <button class="btn btn-primary" onclick="testAllLinks()" style="margin: 5px;">
                    测试所有链接
                </button>
                <button class="btn btn-secondary" onclick="checkServices()" style="margin: 5px;">
                    检查服务状态
                </button>
                <button class="btn btn-success" onclick="simulateUserFlow()" style="margin: 5px;">
                    模拟用户流程
                </button>
            </div>
            
            <div id="testResults" style="margin-top: 20px; padding: 15px; background: var(--bg-secondary); border-radius: var(--radius-medium); display: none;">
                <h4>测试结果</h4>
                <div id="testOutput"></div>
            </div>
        </div>
    </div>

    <script src="js/common.js"></script>
    <script>
        // 测试所有链接
        async function testAllLinks() {
            const testResults = document.getElementById('testResults');
            const testOutput = document.getElementById('testOutput');
            
            testResults.style.display = 'block';
            testOutput.innerHTML = '<div>正在测试链接...</div>';
            
            const links = document.querySelectorAll('.test-item[href]');
            let results = [];
            
            for (let link of links) {
                const url = link.href;
                const title = link.querySelector('.test-item-title').textContent.trim();
                
                try {
                    const response = await fetch(url, { method: 'HEAD' });
                    results.push(`✅ ${title}: ${response.status}`);
                } catch (error) {
                    results.push(`❌ ${title}: 无法访问`);
                }
            }
            
            testOutput.innerHTML = results.join('<br>');
        }
        
        // 检查服务状态
        async function checkServices() {
            const testResults = document.getElementById('testResults');
            const testOutput = document.getElementById('testOutput');
            
            testResults.style.display = 'block';
            testOutput.innerHTML = '<div>正在检查服务状态...</div>';
            
            const services = [
                { name: '前端服务', url: 'http://localhost:3000' },
                { name: '后端服务', url: 'http://localhost:8000/health' }
            ];
            
            let results = [];
            
            for (let service of services) {
                try {
                    const response = await fetch(service.url);
                    if (response.ok) {
                        results.push(`✅ ${service.name}: 正常运行`);
                    } else {
                        results.push(`⚠️ ${service.name}: HTTP ${response.status}`);
                    }
                } catch (error) {
                    results.push(`❌ ${service.name}: 连接失败`);
                }
            }
            
            testOutput.innerHTML = results.join('<br>');
        }
        
        // 模拟用户流程
        function simulateUserFlow() {
            showToast('开始模拟用户流程...', 'info');
            
            // 模拟用户操作流程
            setTimeout(() => {
                showToast('步骤1: 访问登录页面', 'info');
                setTimeout(() => {
                    showToast('步骤2: 登录成功，进入学生首页', 'success');
                    setTimeout(() => {
                        showToast('步骤3: 点击拍照批改功能', 'info');
                        setTimeout(() => {
                            showToast('步骤4: 查看批改结果', 'info');
                            setTimeout(() => {
                                showToast('✅ 用户流程模拟完成！', 'success');
                            }, 1000);
                        }, 1000);
                    }, 1000);
                }, 1000);
            }, 1000);
        }
        
        // 页面加载完成后的初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 自动检查服务状态
            checkServices();
        });
    </script>
</body>
</html>