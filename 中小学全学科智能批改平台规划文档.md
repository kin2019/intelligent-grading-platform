# 中小学全学科智能批改平台规划文档

## 平台愿景

构建一个智能化的中小学作业批改平台，通过AI技术为学生提供个性化的学习反馈，为家长提供全面的学习监控，为教师减轻批改负担，提升整体教学效率。

## 服务启动指南

### 快速启动命令

#### 后端服务启动
```bash
# 方式1: 使用完整命令 (推荐)
cd backend
python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload

# 方式2: 简化命令
cd backend
uvicorn app.main:app --reload

# 后端服务地址: http://localhost:8000
# API文档地址: http://localhost:8000/docs
```

#### 前端服务启动
```bash
# 方式1: Python HTTP服务器 (推荐)
python -m http.server 8080

# 方式2: Node.js HTTP服务器
npx http-server -p 8080

# 前端服务地址: http://localhost:8080/frontend/
```

#### 一键启动所有服务
```bash
# 使用启动脚本
./start-dev.sh

# 或者同时开启两个终端分别运行上述命令
```

## 平台功能架构

### 1. 智能批改引擎
- **OCR文字识别**: 高精度识别手写和打印文字
- **AI智能分析**: 基于深度学习的作业内容理解
- **多学科支持**: 数学、语文、英语、物理、化学等
- **错误类型识别**: 自动分类错误类型并提供针对性建议

### 2. 学习分析系统
- **个性化报告**: 基于学习数据生成详细分析报告
- **进度跟踪**: 实时监控学习进度和成长轨迹
- **薄弱点识别**: 智能识别知识薄弱环节
- **学习建议**: AI生成个性化学习建议和练习推荐

### 3. 家长监控平台
- **多孩子管理**: 支持一个家长账号管理多个孩子
- **实时通知**: 作业完成、成绩更新等实时推送
- **学习报告**: 周报、月报、学期报告等多维度分析
- **成长记录**: 详细记录孩子的学习成长历程

### 4. 学生学习中心
- **作业提交**: 拍照上传作业，即时获得批改结果
- **错题本**: 自动整理错题，支持分类复习
- **学习计划**: 智能制定个性化学习计划
- **成就系统**: 学习成就徽章，激发学习兴趣

## 技术实现方案

### 后端架构 (FastAPI + SQLAlchemy)
```
backend/
├── app/
│   ├── api/v1/              # RESTful API路由
│   │   ├── parent.py        # 家长端API
│   │   ├── student.py       # 学生端API
│   │   ├── auth.py          # 认证API
│   │   └── homework.py      # 作业相关API
│   ├── core/                # 核心配置
│   │   ├── config.py        # 应用配置
│   │   ├── database.py      # 数据库配置
│   │   └── deps.py          # 依赖注入
│   ├── models/              # 数据模型
│   │   ├── user.py          # 用户模型
│   │   ├── homework.py      # 作业模型
│   │   └── parent_child.py  # 家长孩子关联模型
│   └── services/            # 业务服务
│       ├── ocr_service.py   # OCR识别服务
│       ├── ai_service.py    # AI分析服务
│       └── notification.py # 通知服务
```

### 前端架构 (原生JavaScript + 响应式设计)
```
frontend/
├── parent-home.html         # 家长端主页
├── manage-children.html     # 孩子管理页面
├── child-detail.html        # 孩子详情页面
├── student-home.html        # 学生端主页
├── homework-submit.html     # 作业提交页面
├── error-analysis.html      # 错题分析页面
├── learning-progress.html   # 学习进度页面
├── css/                     # 样式文件
└── js/                      # 脚本文件
```

## 数据库设计

### 核心数据表结构

#### 用户表 (users)
- id: 用户唯一标识
- openid/unionid: 微信用户标识
- nickname: 用户昵称
- role: 用户角色 (parent/student)
- grade: 年级信息
- avatar_url: 头像地址
- is_active: 是否激活

#### 家长孩子关联表 (parent_child)
- id: 关联记录ID
- parent_id: 家长用户ID
- child_id: 孩子用户ID
- nickname: 孩子昵称
- school: 学校信息
- class_name: 班级信息
- relationship_type: 关系类型

#### 作业记录表 (homework)
- id: 作业记录ID
- user_id: 学生用户ID
- subject: 学科
- title: 作业标题
- total_questions: 题目总数
- wrong_count: 错题数量
- accuracy_rate: 正确率
- status: 状态 (pending/completed)

#### 错题记录表 (error_questions)
- id: 错题记录ID
- homework_id: 作业ID
- user_id: 学生用户ID
- question_text: 题目内容
- user_answer: 学生答案
- correct_answer: 正确答案
- error_type: 错误类型
- error_reason: 错误原因

## 部署架构

### 开发环境部署
1. **环境准备**
   - Python 3.8+
   - SQLite数据库
   - 现代浏览器

2. **启动步骤**
   ```bash
   # 1. 启动后端服务
   cd backend
   python -m uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
   
   # 2. 启动前端服务
   python -m http.server 8080
   
   # 3. 访问平台
   # 前端地址: http://localhost:8080/frontend/
   # 后端API: http://localhost:8000/api/v1/
   # API文档: http://localhost:8000/docs
   ```

### 生产环境部署
使用Docker Compose一键部署:
```bash
docker-compose up -d
```

## API接口规范

### 认证机制
- 使用JWT Token进行身份验证
- Token有效期: 8天
- 请求头格式: `Authorization: Bearer {token}`

### 主要API端点

#### 家长端API
- `GET /api/v1/parent/dashboard` - 获取家长仪表板数据
- `GET /api/v1/parent/children` - 获取孩子列表
- `POST /api/v1/parent/children` - 添加新孩子
- `PUT /api/v1/parent/children/{id}` - 更新孩子信息
- `DELETE /api/v1/parent/children/{id}` - 删除孩子记录
- `GET /api/v1/parent/children/{id}/report` - 获取孩子学习报告
- `GET /api/v1/parent/children/{id}/homework` - 获取孩子作业历史

#### 学生端API
- `GET /api/v1/student/homework` - 获取作业列表
- `POST /api/v1/student/homework/submit` - 提交作业
- `GET /api/v1/student/errors` - 获取错题分析
- `POST /api/v1/student/errors/{id}/review` - 标记错题已复习

## 功能特色

### 1. 智能化批改
- 支持手写文字识别
- 多学科智能分析
- 自动错误类型分类
- 个性化建议生成

### 2. 数据可视化
- 学习进度图表
- 成绩趋势分析
- 错题分布统计
- 学科能力雷达图

### 3. 个性化服务
- AI驱动的学习建议
- 自适应学习路径
- 智能练习推荐
- 个人成长档案

### 4. 家校互联
- 实时学习状态同步
- 家长监控面板
- 学习报告推送
- 多维度数据分析

## 未来规划

### 短期目标 (3个月)
- 完善核心批改功能
- 优化用户体验
- 增加更多学科支持
- 移动端适配优化

### 中期目标 (6个月)
- 引入AI智能推荐算法
- 构建题库管理系统
- 开发教师端功能
- 集成第三方教育资源

### 长期目标 (12个月)
- 建设完整的教育生态
- 实现多平台互通
- 推广到更多学校
- 打造行业标杆产品

## 技术支持

### 开发环境要求
- Python 3.8+
- Node.js 14+ (可选)
- 现代浏览器支持
- 稳定的网络连接

### 常见问题解决
1. **后端启动失败**: 检查Python环境和依赖包安装
2. **前端页面无法访问**: 确认端口8080未被占用
3. **API调用失败**: 检查后端服务是否正常运行
4. **数据库错误**: 确认SQLite数据库文件权限

### 联系方式
如遇到技术问题或需要功能建议，请及时反馈。